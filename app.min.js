"use strict";var found=function(t,e){return-1<t.indexOf(e)},isoToDate=function(t){return new Date(t).toLocaleDateString().replace(/\//g,"/")},toShortDate=function(t){return"("+(new Date(t).getMonth()+1)+"/"+new Date(t).getFullYear()+")"},id=function(t){return document.getElementById(t)},tags=function(t,e){return t.getElementsByTagName(e)},createElement=function(t){return document.createElement(t)},addClass=function(t,e){return t.classList.add(e)},setElementText=function(t,e){return t.textContent=e,t},setElementAttributes=function(t,e){for(var n in e){var r=e[n];t.setAttribute(n,r)}return t},E=function(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=void 0);var r=createElement(t);return e&&setElementAttributes(r,e),n&&setElementText(r,n),r},createFragment=function(){return document.createDocumentFragment()},replaceNode=function(t,e){return t.parentNode.replaceChild(e,t)},prependElement=function(t,e){return t.insertBefore(e,t.firstChild)},appendElement=function(t,e){return t.appendChild(e)},render=function(t,e){return document.createRange().createContextualFragment(e(t)).firstChild},setBGUrl=function(t,e){return void 0===e&&(e="contain"),"\n\tbackground: url("+t+") no-repeat;\n\tbackground-size: "+e+" !important\n"},getProp=function(t,e){return String(t.getPropertyValue(e)).trim()},setProp=function(t,e,n){return t.style.setProperty(e,n)},setProps=function(t,e){for(var n in e){var r=e[n];t.style.setProperty(n,r)}return t},isInView=function(t,e){void 0===e&&(e="");var n=t.getBoundingClientRect(),r=n.top,o=n.bottom,a=window.innerHeight;return"partial"===e?r<a&&0<=o:0<=r&&o<=a},paint=function(){for(var t=function(i){var s=setInterval(function(){if(isInView(i,"partial")){for(var e=1e3,t=tags(i,"skill"),n=t.length,r=function(t){setTimeout(function(){addClass(tags(t,"icon")[0],"enter")},e),e*=.9},o=0,a=t;o<a.length;o++){r(a[o])}setProp(i,"--badge-count","'"+n+"'"),addClass(i,"reveal"),clearInterval(s)}},50)},e=0,n=tags(document,"course");e<n.length;e++){t(n[e])}},conceive=function(t){for(var e,n,r=[],o=[],a=t.badges,i=id("welcome"),s=createFragment(),u=0,l=a;u<l.length;u++){var c=l[u],d=c.earned_date,f=c.courses.length;if(f&&found(r,c.courses[0].title)){var p=c.courses[0].title,g=s.childNodes[r.indexOf(p)];appendElement(g,render(c,function(t){var e=t.name,n=t.icon_url,r=t.url;return"<skill>\n\t\t\t\t\t\t\t<icon style='"+setBGUrl(n)+"'></icon>\n\t\t\t\t\t\t\t<a href="+r+" title='view course stage'>\n\t\t\t\t\t\t\t\t"+e+"\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</skill>"})),o=[c.name].concat(o),setProps(g,((e={})["--total-courses"]="'"+r.length+"'",e["--total-badges"]="'"+o.length+"'",e["--date"]="'"+isoToDate(d)+"'",e))}if(f&&!found(r,c.courses[0].title)){g=void 0,p=c.courses[0].title;prependElement(s,render([t,c],function(t){var e=t[0],n=e.profile_url,r=e.name,o=t[1],a=o.name,i=o.url,s=o.icon_url,u=o.courses[0],l=u.title;return"<course>\n\t\t\t\t\t\t\t<a href="+n+" class='profile' title='view "+r+"'s profile'>\n\t\t\t\t\t\t\t\t"+r+"\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<a href="+u.url+">"+l+"</a>\n\t\t\t\t\t\t\t<skill>\n\t\t\t\t\t\t\t\t<icon style='"+setBGUrl(s)+"'></icon>\n\t\t\t\t\t\t\t\t<a href="+i+" title='view course stage'>"+a+"</a>\n\t\t\t\t\t\t\t</skill>\n\t\t\t\t\t\t</course>"})),r=[p].concat(r),o=[c.name].concat(o),g=s.firstChild,setProps(g,((n={})["--total-courses"]="'"+r.length+"'",n["--total-badges"]="'"+o.length+"'",n["--date"]="'"+isoToDate(d)+"'",n))}}replaceNode(i,s),paint()},request=function(t,e){var n=100,r=id("loader"),o=getComputedStyle(r),a=new XMLHttpRequest,i=setInterval(function(){var t,e=getProp(o,"--progress");setProps(r,((t={})["--progress"]=n*=e<"50"?.9:.6,t["--percent"]="'"+(100-n.toFixed(0))+"'",t))},300);a.open("GET",t,!0),a.onload=function(){var t;200<=a.status&&a.status<400&&e(JSON.parse(a.responseText)),setProps(r,((t={})["--progress"]=0,t["--percent"]="'100'",t["--color"]="#f5f5f5",t)),clearInterval(i)},a.send()};request("https://teamtreehouse.com/abrahamjuliot.json",conceive);